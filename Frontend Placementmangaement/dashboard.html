
<!DOCTYPE html>
<html>
<head>
  <title>Pie Chart Example</title>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
     google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawCharts);
     
     
    function drawChart() {
      fetch('http://localhost:8080/Placement/visit/display')
      .then(response => response.json())
      .then(data => {
      
        const ctcValues = {};

        data.forEach(visit => {
        
          const ctc = visit.ctc;
          
          if (ctcValues[ctc]) {
            ctcValues[ctc]++;
          } else {
            ctcValues[ctc] = 1;
          }
        });

       

        const ctcData = [['CTC', 'Count']];
        Object.entries(ctcValues).forEach(([ctc, count]) => {
          ctcData.push([ctc, count]);
        });

        const options = {
          title: 'Visits by Job Profile',
          width: 600,
          height: 550,
          
        };

        options.title = 'The Number Of Companies Which Are Offering Similar CTC';

        const ctcChart = new google.visualization.PieChart(document.getElementById('ctcChart'));
        ctcChart.draw(google.visualization.arrayToDataTable(ctcData), options);
      })
      .catch(error => console.error(error));
    }
    function drawCharts() {
  fetch('http://localhost:8080/Placement/placement/display')
    .then(response => response.json())
    .then(data => {
      console.log(data);
      const placementData = {};

      data.forEach(placement => {
        const studentName = placement.student.studentName;
        const companyName = placement.company.companyName;

        if (placementData[companyName]) {
          placementData[companyName].push(studentName);
        } else {
          placementData[companyName] = [studentName];
        }
      });

      const chartData = [['Company Name', 'Number of Placements']];
      Object.entries(placementData).forEach(([companyName, studentList]) => {
        chartData.push([companyName, studentList.length]);
      });

      const options = {
        title: 'The Students Who Are Placed in The Respective Companies',
        width: 600,
        height: 550,
      };

      const chart = new google.visualization.PieChart(document.getElementById('placementChart'));
      chart.draw(google.visualization.arrayToDataTable(chartData), options);
    })
    .catch(error => console.error(error));
}

  </script>
</head>
<body style="background-color: aliceblue;">
  <div style="display: flex; gap: 50px;">
 
  <div style="margin-left: 30px;"id = "ctcChart"></div>
  <div id="placementChart"></div>

  </div>
</body>
</html>





